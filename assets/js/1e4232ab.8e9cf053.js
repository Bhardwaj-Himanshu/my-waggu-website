"use strict";(self.webpackChunkwagtail=self.webpackChunkwagtail||[]).push([[818],{3905:(e,t,a)=>{a.d(t,{Zo:()=>g,kt:()=>u});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},g=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),c=p(a),m=o,u=c["".concat(s,".").concat(m)]||c[m]||d[m]||r;return a?n.createElement(u,l(l({ref:t},g),{},{components:a})):n.createElement(u,l({ref:t},g))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6193:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var n=a(7462),o=(a(7294),a(3905));const r={sidebar_position:2},l="A Basic Blog",i={unversionedId:"tutorial-basics/create-a-document",id:"tutorial-basics/create-a-document",title:"A Basic Blog",description:"We are now ready to create a blog. To do so, run python manage.py startapp blog to create a new app in your Wagtail project.",source:"@site/docs/tutorial-basics/create-a-document.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/create-a-document",permalink:"/wagtail-demo.github.io/docs/tutorial-basics/create-a-document",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-basics/create-a-document.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Start the Server",permalink:"/wagtail-demo.github.io/docs/tutorial-basics/create-a-page"},next:{title:"Some more Sample Images and Errors faced.",permalink:"/wagtail-demo.github.io/docs/tutorial-basics/create-a-blog-post"}},s={},p=[],g={toc:p},c="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(c,(0,n.Z)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"a-basic-blog"},"A Basic Blog"),(0,o.kt)("p",null,"We are now ready to create a blog. To do so, run ",(0,o.kt)("strong",{parentName:"p"},"python manage.py startapp blog")," to create a new app in your Wagtail project."),(0,o.kt)("p",null,"Add the new ",(0,o.kt)("strong",{parentName:"p"},"blog")," app to ",(0,o.kt)("strong",{parentName:"p"},"INSTALLED_APPS")," in ",(0,o.kt)("strong",{parentName:"p"},"mysite/settings/base.py"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"from wagtail.models import Page\nfrom wagtail.fields import RichTextField\nfrom wagtail.admin.panels import FieldPanel\n\n\nclass BlogIndexPage(Page):\n    intro = RichTextField(blank=True)\n\n    content_panels = Page.content_panels + [\n        FieldPanel('intro')\n    ]\n")),(0,o.kt)("p",null,"Run ",(0,o.kt)("strong",{parentName:"p"},"python manage.py makemigrations")," and ",(0,o.kt)("strong",{parentName:"p"},"python manage.py migrate"),"."),(0,o.kt)("p",null,"Since the model is called ",(0,o.kt)("strong",{parentName:"p"},"BlogIndexPage"),", the default template name (unless we override it) will be ",(0,o.kt)("strong",{parentName:"p"},"blog_index_page.html"),". Django will look for a template whose name matches the name of your Page model within the templates directory in your blog app folder. This default behaviour can be overridden if needed.\nTo create a template for the ",(0,o.kt)("strong",{parentName:"p"},"BlogIndexPage")," model, create a file at the location ",(0,o.kt)("strong",{parentName:"p"},"blog/templates/blog/blog_index_page.html"),"."),(0,o.kt)("p",null,"In your ",(0,o.kt)("strong",{parentName:"p"},"blog_index_page.html")," file enter the following content:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "base.html" %} {% load wagtailcore_tags %} {% block body_class\n%}template-blogindexpage{% endblock %} {% block content %}\n<h1>{{ page.title }}</h1>\n\n<div class="intro">{{ page.intro|richtext }}</div>\n\n{% for post in page.get_children %}\n<h2><a href="{% pageurl post %}">{{ post.title }}</a></h2>\n{{ post.specific.intro }} {{ post.specific.body|richtext }} {% endfor %} {%\nendblock %}\n')),(0,o.kt)("p",null,"Most of this should be familiar, but we\u2019ll explain ",(0,o.kt)("strong",{parentName:"p"},"get_children")," a bit later. Note the ",(0,o.kt)("strong",{parentName:"p"},"pageurl")," tag, which is similar to Django\u2019s url tag but takes a Wagtail Page object as an argument."),(0,o.kt)("p",null,"In the Wagtail admin, go to Pages, then Home. Add a child page to the Home page by clicking on the \u201cActions\u201d icon and selecting the option \u201cAdd child page\u201d. Choose \u201cBlog index page\u201d from the list of the page types. Use \u201cOur Blog\u201d as your page title, make sure it has the slug \u201cblog\u201d on the Promote tab, and publish it. You should now be able to access the url ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"http://127.0.0.1:8000/blog"},"http://127.0.0.1:8000/blog"))," on your site (note how the slug from the Promote tab defines the page URL)."),(0,o.kt)("p",null,"Now we need a model and template for our blog posts. In ",(0,o.kt)("strong",{parentName:"p"},"blog/models.py"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"from django.db import models\n\nfrom wagtail.models import Page\nfrom wagtail.fields import RichTextField\nfrom wagtail.admin.panels import FieldPanel\nfrom wagtail.search import index\n\n\n# Keep the definition of BlogIndexPage, and add:\n\n\nclass BlogPage(Page):\n    date = models.DateField(\"Post date\")\n    intro = models.CharField(max_length=250)\n    body = RichTextField(blank=True)\n\n    search_fields = Page.search_fields + [\n        index.SearchField('intro'),\n        index.SearchField('body'),\n    ]\n\n    content_panels = Page.content_panels + [\n        FieldPanel('date'),\n        FieldPanel('intro'),\n        FieldPanel('body'),\n    ]\n")),(0,o.kt)("p",null,"In the model above, we import ",(0,o.kt)("strong",{parentName:"p"},"index")," as this makes the model searchable. You can then list fields that you want to be searchable for the user."),(0,o.kt)("p",null,"Run ",(0,o.kt)("strong",{parentName:"p"},"python manage.py makemigrations")," and ",(0,o.kt)("strong",{parentName:"p"},"python manage.py migrate"),"."),(0,o.kt)("p",null,"Create a new template file at the location ",(0,o.kt)("strong",{parentName:"p"},"blog/templates/blog/blog_page.html"),". Now add the following content to your newly created ",(0,o.kt)("strong",{parentName:"p"},"blog_page.html")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "base.html" %} {% load wagtailcore_tags %} {% block body_class\n%}template-blogpage{% endblock %} {% block content %}\n<h1>{{ page.title }}</h1>\n<p class="meta">{{ page.date }}</p>\n\n<div class="intro">{{ page.intro }}</div>\n\n{{ page.body|richtext }}\n\n<p><a href="{{ page.get_parent.url }}">Return to blog</a></p>\n\n{% endblock %}\n')),(0,o.kt)("p",null,"Note the use of Wagtail\u2019s built-in get_parent() method to obtain the URL of the blog this post is a part of."),(0,o.kt)("p",null,"Now create a few blog posts as children of BlogIndexPage. Be sure to select type \u201cBlog Page\u201d when creating your posts."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://docs.wagtail.org/en/stable/_images/tutorial_4a.png",alt:null})),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://docs.wagtail.org/en/stable/_images/tutorial_4b.png",alt:null})),(0,o.kt)("p",null,"Wagtail gives you full control over what kinds of content can be created under various parent content types. By default, any page type can be a child of any other page type."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://docs.wagtail.org/en/stable/_images/tutorial_5.png",alt:null})),(0,o.kt)("p",null,"Publish each blog post when you are done editing."),(0,o.kt)("p",null,"You should now have the very beginnings of a working blog. Access the /blog URL and you should see something like this:"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://docs.wagtail.org/en/stable/_images/tutorial_7.png",alt:null})),(0,o.kt)("p",null,"And this ladies and gentlemen is a basic blog, ",(0,o.kt)("strong",{parentName:"p"},"hassshhh"),"."))}d.isMDXComponent=!0}}]);